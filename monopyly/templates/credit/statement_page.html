{% extends 'layout.html' %}


{% block header %}

	<h1>
		{% block title %}
			Statement Details
		{% endblock %}
	</h1>

	<nav id="sidebar-nav-menu">
		<ul>

			<li>
				<a class="action" href="{{ url_for('credit.show_statements') }}">
					<img class="button-icon" src="{{ url_for('static', filename='img/arrow-left.png') }}" />
				</a>
			</li>

			<li>
				<a class="action" href="{{ url_for('credit.new_transaction') }}">
					<img class="button-icon" src="{{ url_for('static', filename='img/plus-symbol.png') }}" />
				</a>
			</li>

		</ul>
	</nav>

{% endblock %}


{% block content %}

	<div id="statement">
		<div id="statement-info">
			<div id="card">
				{{ statement['bank'].upper() }} {{ statement['last_four_digits'] }}
			</div>
			<div id="issue-date">
				{{ statement['issue_date'].strftime('%B %Y') }}
			</div>
			<div id="total">
				{{ '${:,.2f}'.format(statement['SUM(price)']) }}
			</div>
			<div id="due">
				<div id="due-date">
					DUE <span id="date">{{ statement['due_date'] }}</span>
				</div>
				<div id="paid">
					{{ 'PAID' if statement['paid'] else '' }}
				</div>
			</div>
		</div>
		
		<table id="statement-transactions" class="transactions">
	
			<tr>
				<th class="date">Date</th>
				<th class="text">Vendor</th>
				<th class="price">Price</th>
				<th class="edit"></th>
			</tr>
	
			{% for transaction in statement_transactions %}
	
				<tr>
					<td class="date">{{ transaction['transaction_date'] }}</td>
					<td class="text">{{ transaction['vendor'] }}</td>
					<td class="price">{{ '${:,.2f}'.format(transaction['price']) }}</td>
					<td>
						<a class"transaction" href="{{ url_for('credit.show_transaction', transaction_id=transaction['id']) }}">
							<img class="edit-icon hide" src="{{ url_for('static', filename='img/edit.png') }}" />
						</a>
					</td>
				</tr>
	
			{% endfor %}	
	
		</table>

	</div>

{% endblock %}
