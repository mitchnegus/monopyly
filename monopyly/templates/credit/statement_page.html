{% extends 'layout.html' %}


{% block header %}

	<h1>
		{% block title %}
			Statement Details
		{% endblock %}
	</h1>

	<nav id="sidebar-nav-menu">
		<ul>

			<li>
				<a class="action" href="{{ url_for('credit.show_statements') }}">
					<img class="button-icon" src="{{ url_for('static', filename='img/arrow-left.png') }}" />
				</a>
			</li>

			<li>
				<a class="action" href="{{ url_for('credit.new_transaction', statement_id=statement['id']) }}">
					<img class="button-icon" src="{{ url_for('static', filename='img/plus.png') }}" />
				</a>
			</li>

		</ul>
	</nav>

{% endblock %}


{% block content %}

	<div id="statement-details">

		<div id="statement-info-container">
			{% include 'credit/statement_info.html' %}
		</div>
		
		<table id="statement-transactions" class="transactions">
	
			<tr>
				<th class="date">Date</th>
				<th class="text">Vendor</th>
				<th class="price">Price</th>
				<th class="edit"></th>
			</tr>
	
			{% for transaction in statement_transactions %}
	
				<tr>
					<td class="date">{{ transaction['transaction_date'] }}</td>
					<td class="text">{{ transaction['vendor'] }}</td>
					<td class="price">{{ '${:,.2f}'.format(transaction['price']) }}</td>
					<td>
						<a href="{{ url_for('credit.show_transaction', transaction_id=transaction['id']) }}">
							<img class="more" src="{{ url_for('static', filename='img/plus.png') }}" />
						</a>
					</td>
				</tr>
	
			{% endfor %}	
	
		</table>

	</div>

{% endblock %}


{% block javascript %}

	<script>
		const UPDATE_STATEMENT_DUE_DATE_ENDPOINT = "{{ url_for('credit.update_statement_due_date', statement_id=statement['id']) }}";
		const UPDATE_STATEMENT_PAYMENT_ENDPOINT = "{{ url_for('credit.update_statement_payment', statement_id=statement['id']) }}";
	</script>
	<script src="{{ url_for('static', filename='js/update_statement_due_date.js') }}">
	</script>
	<script src="{{ url_for('static', filename='js/update_statement_payment.js') }}">
	</script>

{% endblock %}
